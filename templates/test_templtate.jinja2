from playwright.sync_api import sync_playwright


{% for story in user_stories -%}
def test_{{ story.id.split('us-')[1].replace("-","_") }}():
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=True)
        context = browser.new_context()
        page = context.new_page()
        {% for action in story.actions -%}
        {% if action.type == '$click' -%}
        page.locator("{{ action.selector }}").click()
        {% elif action.type == '$input' -%}
        page.locator("{{ action.selector }}").fill("{{ action.selector }}", "{{ action.value }}")
        {% elif action.type == '$navigate' -%}
        page.goto("{{ action.url }}")
        {% endif -%}
        {% endfor -%}
        browser.close()

{% endfor %}